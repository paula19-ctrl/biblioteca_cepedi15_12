{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Biblioteca</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'css/estilo.css' %}">

    <style>
        :root { --sidebar-width: 260px; }
        body { display: flex; min-height: 100vh; overflow-x: hidden; }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background-color: #2c3e50;
            color: white;
            position: fixed;
            height: 100vh;
            left: 0; top: 0;
            z-index: 1000;
        }
        .sidebar-header {
            padding: 20px;
            background-color: #1a252f;
            text-align: center;
        }
        .sidebar-header a { color: white; text-decoration: none; }

        .menu-secao {
            padding: 15px 20px 5px;
            font-size: 0.75rem;
            text-transform: uppercase;
            color: #95a5a6;
            letter-spacing: 1px;
        }
        .nav-link {
            color: #bdc3c7;
            padding: 10px 25px;
            display: flex;
            align-items: center;
            transition: 0.2s;
        }
        .nav-link:hover { background-color: #34495e; color: white; }
        .nav-link i { width: 25px; margin-right: 10px; }

        /* Conteúdo */
        .main-container { flex: 1; margin-left: var(--sidebar-width); background-color: #f8f9fa; }

        /* Navbar Superior Fixa */
        .top-navbar {
            height: 60px;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            border-bottom: 1px solid #dee2e6;
            position: sticky;
            top: 0;
            z-index: 999;
        }
        .content-area { padding: 30px; }

        /* Dark Mode overrides para a estrutura */
        body.dark .main-container { background-color: #121212; }
        body.dark .top-navbar { background-color: #1e1e1e; border-bottom-color: #333; color: white; }
        body.dark .sidebar { background-color: #1a1a1a; }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="sidebar-header">
            <a href="{% url 'index' %}">
                <h4><i class="fa fa-university"></i> BIBLIO-SISTEMA</h4>
            </a>
        </div>

        <div class="menu-secao">Principal</div>
        <a href="{% url 'index' %}" class="nav-link"><i class="fa fa-dashboard"></i> Dashboard (Início)</a>

        <div class="menu-secao">Alunos</div>
        <a href="{% url 'alunos:inserir_aluno' %}" class="nav-link"><i class="fa fa-plus"></i> Inserir Aluno</a>
        <a href="{% url 'alunos:listar_alunos' %}" class="nav-link"><i class="fa fa-users"></i> Listar Alunos</a>

        <div class="menu-secao">Livros</div>
        <a href="{% url 'livros:inserir_livro' %}" class="nav-link"><i class="fa fa-plus-square"></i> Inserir Livro</a>
        <a href="{% url 'livros:listar_livros' %}" class="nav-link"><i class="fa fa-book"></i> Listar Livros</a>

        <div class="menu-secao">Empréstimos</div>
        <a href="{% url 'emprestimos:inserir_emprestimo' %}" class="nav-link"><i class="fa fa-handshake-o"></i> Novo Empréstimo</a>
        <a href="{% url 'emprestimos:listar_emprestimos' %}" class="nav-link"><i class="fa fa-history"></i> Histórico</a>
    </nav>

    <div class="main-container">
        <header class="top-navbar">
            <h5 class="m-0">{% block title %}Painel de Controle{% endblock %}</h5>

            <button class="btn btn-outline-secondary btn-sm" id="theme-toggle" onclick="mudarTema()">
                <i class="fa fa-moon-o"></i> Alternar Tema
            </button>
        </header>

        <main class="content-area">
            {% block content %}
            {% endblock %}
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function mudarTema() {
            document.body.classList.toggle("dark");
            const isDark = document.body.classList.contains("dark");
            localStorage.setItem("tema", isDark ? "dark" : "light");
            atualizarBotao(isDark);
        }

        function atualizarBotao(isDark) {
            const btn = document.getElementById("theme-toggle");
            if (btn) {
                btn.innerHTML = isDark ? '<i class="fa fa-sun-o"></i> Modo Claro' : '<i class="fa fa-moon-o"></i> Modo Escuro';
                btn.className = isDark ? 'btn btn-outline-warning btn-sm' : 'btn btn-outline-dark btn-sm';
            }
        }

        if (localStorage.getItem("tema") === "dark") {
            document.body.classList.add("dark");
            atualizarBotao(true);
        }
    </script>
</body>
</html>
